---
layout:
---

<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml">
{% comment %}<!-- Process pages -->{% endcomment %}
{% for node in site.pages %}
    {% unless site.exclude_from_localization contains node.path %}
        {% if node.layout %}
            {% assign page_url = node.url | replace:'index.html','' %}
            {% if page_url == '' %}{% assign page_url = '/' %}{% endif %}
            
            {% if node.last_modified_at %}
                {% assign lastmod_date = node.last_modified_at %}
            {% elsif node.date %}
                {% assign lastmod_date = node.date %}
            {% else %}
                {% assign lastmod_date = site.time %}
            {% endif %}
            
            {% if page_url == '/' %}
                {% assign priority = '1.0' %}
                {% assign changefreq = 'daily' %}
            {% else %}
                {% assign priority = '0.8' %}
                {% assign changefreq = 'monthly' %}
            {% endif %}
            
            <url>
                <loc>{{ page_url | absolute_url }}</loc>
                <lastmod>{{ lastmod_date | date_to_xmlschema }}</lastmod>
                <changefreq>{{ changefreq }}</changefreq>
                <priority>{{ priority }}</priority>
                {% assign default_lang = site.languages[0] %}
                {% for lang in site.languages %}
                    {% if lang == default_lang %}
                        <xhtml:link rel="alternate" hreflang="{{ lang }}" href="{{ page_url | absolute_url }}" />
                    {% else %}
                        <xhtml:link rel="alternate" hreflang="{{ lang }}" href="{{ page_url | prepend: lang | prepend: '/' | absolute_url }}" />
                    {% endif %}
                {% endfor %}
                <xhtml:link rel="alternate" hreflang="x-default" href="{{ page_url | absolute_url }}" />
            </url>
        {% endif %}
    {% endunless %}
{% endfor %}

{% comment %}<!-- Process collections -->{% endcomment %}
{% for collection in site.collections %}
    {% for node in site[collection.label] %}
        {% assign page_url = node.url %}
        
        {% if node.last_modified_at %}
            {% assign lastmod_date = node.last_modified_at %}
        {% elsif node.date %}
            {% assign lastmod_date = node.date %}
        {% else %}
            {% assign lastmod_date = site.time %}
        {% endif %}
        
        {% if collection.label == 'posts' %}
            {% assign priority = '0.7' %}
            {% assign changefreq = 'weekly' %}
        {% elsif collection.label == 'projects' %}
            {% assign priority = '0.8' %}
            {% assign changefreq = 'monthly' %}
        {% else %}
            {% assign priority = '0.6' %}
            {% assign changefreq = 'monthly' %}
        {% endif %}
        
        <url>
            <loc>{{ page_url | absolute_url }}</loc>
            <lastmod>{{ lastmod_date | date_to_xmlschema }}</lastmod>
            <changefreq>{{ changefreq }}</changefreq>
            <priority>{{ priority }}</priority>
            {% for lang in site.languages %}
                {% if lang == site.default_lang %}
                    <xhtml:link rel="alternate" hreflang="{{ lang }}" href="{{ page_url | absolute_url }}" />
                {% else %}
                    <xhtml:link rel="alternate" hreflang="{{ lang }}" href="{{ page_url | prepend: lang | prepend: '/' | absolute_url }}" />
                {% endif %}
            {% endfor %}
            <xhtml:link rel="alternate" hreflang="x-default" href="{{ page_url | absolute_url }}" />
        </url>
    {% endfor %}
{% endfor %}
</urlset>
