<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% assign page_url = page.url | replace:'index.html','' | absolute_url %}
  {% assign page_title = page.title | default: site.data.settings.title %}
  {% assign page_description = page.description | default: site.data.settings.description | strip_html | strip_newlines | truncate: 160 %}
  {% assign page_image = page.image | default: site.data.settings.hero.hero_image | default: site.data.settings.logo | absolute_url %}
  {% assign current_lang = page.lang | default: site.lang | default: 'ko' %}
  {% assign is_post = page.layout == 'post' %}
  {% assign is_project = page.layout == 'project' %}

  <title>{% if page.title %}{{ page.title }}{% else %}{{ site.data.settings.title }}{% endif %}</title>
  <meta name='description' content='{{ page_description }}'>
  <meta name="author" content="{{ site.data.settings.author_name }}">

  <link rel="canonical" href="{{ page_url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.data.settings.title | escape }}" href="{{ "/feed.xml" | relative_url }}">

  <!-- Favicon and Apple Touch Icons -->
  <link rel="icon" type="image/x-icon" href="{{ "/favicon.ico" | relative_url }}">
  {% if site.data.settings.logo %}
  <link rel="apple-touch-icon" href="{{ site.data.settings.logo | absolute_url }}">
  <link rel="apple-touch-icon-precomposed" href="{{ site.data.settings.logo | absolute_url }}">
  {% else %}
  <link rel="apple-touch-icon" href="{{ "/favicon.ico" | absolute_url }}">
  <link rel="apple-touch-icon-precomposed" href="{{ "/favicon.ico" | absolute_url }}">
  {% endif %}

  <!-- Hreflang Tags for Multilingual SEO -->
  {% assign default_lang = site.languages[0] %}
  {% for lang in site.languages %}
    {% if lang == default_lang %}
      <link rel="alternate" hreflang="{{ lang }}" href="{{ page.url | replace:'index.html','' | absolute_url }}">
    {% else %}
      <link rel="alternate" hreflang="{{ lang }}" href="{{ page.url | prepend: lang | prepend: '/' | absolute_url }}">
    {% endif %}
  {% endfor %}
  <link rel="alternate" hreflang="x-default" href="{{ page_url }}">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{% if page.url == "/" %}{{ site.data.settings.title }}{% else %}{{ page_title }} – {{ site.data.settings.title }}{% endif %}">
  <meta name="twitter:description" content="{% if page.url == "/" %}{{ site.data.settings.description | strip_html | xml_escape }}{% elsif page.description %}{{ page.description | strip_html | xml_escape }}{% else %}{{ page.excerpt | strip_html | xml_escape }}{% endif %}">
  <meta name="twitter:image" content="{{ page_image }}">
  {% if site.data.settings.twitter_site %}
  <meta name="twitter:site" content="{{ site.data.settings.twitter_site }}">
  {% endif %}
  {% if site.data.settings.twitter_creator %}
  <meta name="twitter:creator" content="{{ site.data.settings.twitter_creator }}">
  {% endif %}

  <!-- Facebook OpenGraph -->
  <meta property="og:title" content="{% if page.url == "/" %}{{ site.data.settings.title }}{% else %}{{ page_title }} – {{ site.data.settings.title }}{% endif %}">
  <meta property="og:description" content="{% if page.url == "/" %}{{ site.data.settings.description | strip_html | xml_escape }}{% elsif page.description %}{{ page.description | strip_html | xml_escape }}{% else %}{{ page.excerpt | strip_html | xml_escape }}{% endif %}">
  <meta property="og:image" content="{{ page_image }}">
  <meta property="og:url" content="{{ page_url }}">
  <meta property="og:type" content="{% if is_post %}article{% elsif is_project %}article{% else %}website{% endif %}">
  <meta property="og:site_name" content="{{ site.data.settings.title }}">
  <meta property="og:locale" content="{% if current_lang == 'ko' %}ko_KR{% else %}en_US{% endif %}">
  {% for lang in site.languages %}
    {% unless lang == current_lang %}
      <meta property="og:locale:alternate" content="{% if lang == 'ko' %}ko_KR{% else %}en_US{% endif %}">
    {% endunless %}
  {% endfor %}

  <!-- Article Meta Tags for Posts -->
  {% if is_post %}
    <meta property="article:author" content="{{ site.data.settings.author_name }}">
    {% if page.date %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    {% endif %}
    {% if page.last_modified_at %}
    <meta property="article:modified_time" content="{{ page.last_modified_at | date_to_xmlschema }}">
    {% endif %}
    {% if page.tags %}
      {% for tag in page.tags %}
      <meta property="article:tag" content="{{ tag }}">
      {% endfor %}
    {% endif %}
  {% endif %}

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ site.data.settings.title }}",
    "url": "{{ site.url }}",
    "logo": "{{ site.data.settings.logo | absolute_url }}",
    "description": "{{ site.data.settings.description | strip_html | xml_escape }}",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "KR",
      "addressRegion": "Jeju",
      "addressLocality": "Jeju-si",
      "streetAddress": "38 Halladaehak-ro"
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+82-64-741-7575",
      "contactType": "Academic Department"
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ site.data.settings.title }}",
    "url": "{{ site.url }}",
    "description": "{{ site.data.settings.description | strip_html | xml_escape }}",
    "publisher": {
      "@type": "Organization",
      "name": "{{ site.data.settings.title }}"
    }
  }
  </script>

  {% if is_post %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{{ page_title | xml_escape }}",
    "description": "{{ page_description | xml_escape }}",
    "image": "{{ page_image }}",
    "datePublished": "{{ page.date | date_to_xmlschema }}",
    "dateModified": "{{ page.last_modified_at | date_to_xmlschema | default: page.date | date_to_xmlschema }}",
    "author": {
      "@type": "Organization",
      "name": "{{ site.data.settings.author_name }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ site.data.settings.title }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ site.data.settings.logo | absolute_url }}"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ page_url }}"
    }{% if page.tags %},
    "keywords": "{{ page.tags | join: ', ' }}"{% endif %}
  }
  </script>
  {% endif %}

  {% if is_project %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CreativeWork",
    "name": "{{ page_title | xml_escape }}",
    "description": "{{ page_description | xml_escape }}",
    "image": "{{ page_image }}",
    "datePublished": "{{ page.date | date_to_xmlschema }}",
    "author": {
      "@type": "Organization",
      "name": "{{ site.data.settings.author_name }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ site.data.settings.title }}"
    }
  }
  </script>
  {% endif %}

  <!-- BreadcrumbList Schema -->
  {% unless page.url == "/" %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ site.url }}"
      }{% assign url_parts = page.url | split: '/' %}{% assign position = 2 %}{% for part in url_parts %}{% if part != '' and part != 'index.html' %}{% assign part_url = '' %}{% for i in (1..forloop.index) %}{% assign idx = forloop.parentloop.index0 | minus: forloop.index | plus: 1 %}{% if idx >= 0 %}{% assign url_parts_reverse = url_parts | reverse %}{% assign part_url = url_parts_reverse[idx] | prepend: '/' | prepend: part_url %}{% endif %}{% endfor %},
      {
        "@type": "ListItem",
        "position": {{ position }},
        "name": "{{ part | capitalize | replace: '-', ' ' }}",
        "item": "{{ part_url | absolute_url }}"
      }{% assign position = position | plus: 1 %}{% endif %}{% endfor %}
    ]
  }
  </script>
  {% endunless %}

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poor+Story:wght@400;600;700&family=Poor+Story:ital,opsz,wght@0,6..72,400;0,6..72,600;0,6..72,700;1,6..72,400;1,6..72,500&display=swap" as="style">

  <link href="https://fonts.googleapis.com/css2?family=Poor+Story:wght@400;600;700&family=Poor+Story:ital,opsz,wght@0,6..72,400;0,6..72,600;0,6..72,700;1,6..72,400;1,6..72,500&display=swap" rel="stylesheet">

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Hahmlet:wght@400;600;700&family=Hahmlet:ital,opsz,wght@0,6..72,400;0,6..72,600;0,6..72,700;1,6..72,400;1,6..72,500&display=swap" as="style">

  <link href="https://fonts.googleapis.com/css2?family=Hahmlet:wght@400;600;700&family=Hahmlet:ital,opsz,wght@0,6..72,400;0,6..72,600;0,6..72,700;1,6..72,400;1,6..72,500&display=swap" rel="stylesheet">

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;600;700&family=Gowun+Batang:ital,opsz,wght@0,6..72,400;0,6..72,600;0,6..72,700;1,6..72,400;1,6..72,500&display=swap" as="style">

  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;600;700&family=Gowun+Batang:ital,opsz,wght@0,6..72,400;0,6..72,600;0,6..72,700;1,6..72,400;1,6..72,500&display=swap" rel="stylesheet">

<script>
    {% if site.data.settings.color_scheme == "auto" %}
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.setAttribute("dark", "");
      document.documentElement.classList.add('dark-mode');
    }
    {% elsif site.data.settings.color_scheme == "light" %}
      document.documentElement.setAttribute("light", "");
      document.documentElement.classList.add('light-mode');
    {% elsif site.data.settings.color_scheme == "dark" %}
      document.documentElement.setAttribute("dark", "");
      document.documentElement.classList.add('dark-mode');
    {% else %}
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.setAttribute("dark", "");
      document.documentElement.classList.add('dark-mode');
    }
    {% endif %}
  </script>

  <style>
  {% capture include_to_scssify %}
    {% include main.scss %}
  {% endcapture %}
  {{ include_to_scssify | scssify }}
  </style>
</head>